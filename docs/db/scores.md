# Scores Collection

日本語版は[こちら](./courses-ja.md)にあります。

The collection that stores user scores.

## Schema

**Bolded** property is the partition key.

|Name|Type|Description|
|----|:--:|-----------|
|id|string|Auto generated by database|
|**userId**|string|Auto generated by Azure Authentication, or special id like [below](#special-userid).|
|userName|string|User name|
|isPublic|boolean|`true` if this score is public, otherwize `false`.|
|songId|string|Song id that depend on official site. `^([01689bdiloqDIOPQ]*){32}$`|
|songName|string|Song name|
|playStyle|integer|`1`: SINGLE, `2`: DOUBLE|
|difficulty|integer|`0`: BEGINNER, `1`: BASIC, `2`: DIFFICULT, `3`: EXPERT, `4`: CHALLENGE|
|score|integer|Normal score|
|exScore|integer?|EX SCORE (optional)|
|maxCombo|integer?|MAX COMBO (optional)|
|clearLamp|integer|`0`: Failed, `1`: Assisted Clear `2`: Clear, `3`: LIFE4, `4`: Good FC (Full Combo), `5`: Great FC, `6`: PFC, `7`: MFC|
|rank|string|Clear rank (`"E"`～`"AAA"`)|

### Special userId

#### `top_score`

The virtual user with the World #1 scores.

It is derived from the "World #1" column on the official website.

It takes the following values.

|Name|Value|
|----|--|
|userId|`"top_score"`|
|userName|`"全国トップ"`|
|isPublic|`true`|
|exScore|Omitted if it cannot be inferred from `score`|
|maxCombo|Omitted if it cannot be inferred from `score`|
|clearLamp|`2` if it cannot be inferred from `score`|

#### `area_top_score_*`

The virtual user with the Area #1 scores. `*` is [Area code](./users.md#area).

It is derived from the "World #1" column on the official website, or public user score.

It takes the following values.

|Name|Value|
|----|--|
|userId|`"area_top_score_"` + Area code|
|userName|Area name (Japanese) + `"トップ"`|
|isPublic|`true`|
|exScore|Omitted if it cannot be inferred from `score`|
|maxCombo|Omitted if it cannot be inferred from `score`|
|clearLamp|`2` if it cannot be inferred from `score`|

## Indexes

```json
{
    "indexingMode": "consistent",
    "automatic": true,
    "includedPaths": [
        {
            "path": "/*"
        }
    ],
    "excludedPaths": [
        {
            "path": "/\"_etag\"/?"
        }
    ]
}
```

## Sample

```json
{
    "id": "<Auto generated by database>",
    "userId": "<Auto generated by Azure Authentication>",
    "userName": "User1",
    "isPublic": true,
    "songId": "QPd01OQqbOIiDoO1dbdo1IIbb60bqPdl",
    "songName": "愛言葉",
    "playStyle": 1,
    "difficulty": 0,
    "score": 1000000,
    "exScore": 402,
    "maxCombo": 122,
    "clearLamp": 7,
    "rank": "AAA"
}
```
