'use strict';(function(b,p){const q=/^.+\/ddr\/ddra20\/p.+=([01689bdiloqDIOPQ]{32}).*$/; const k=/^.+\/ddr\/ddra20\/p\/images\/play_data\/(.+)\.png$/;if(b){const g=b("#data_tbl");if(g&&g.length){const l=p.href.replace(/^.+\/ddr\/ddra20\/p.+_data_(double|single)\.html.*/,"$1");if(l){const h={};b(".data",g).each(function(){const e=b("td:first > .music_info:first",this).attr("href").replace(q,"$1"); const d=b("td:first > .music_info:first",this).text();h[e]=[];b(".rank",this).each(function(){let c=b(this).attr("id");c=c==="beginner"?0:c==="basic"?1:c==="difficult"?2:c==="expert"?3:4;let a=b(".data_score:first",this).text().trim();a=parseInt(a,10);if(Number.isInteger(a)){const f=b(".music_info:first > img:eq(1)",this).attr("src").replace(k,"$1"); const m=b(".music_info:first > img:first",this).attr("src").replace(k,"$1")==="rank_s_e";h[e].push({playStyle:l==="single"?1:2,difficulty:c,songName:d,score:a,clearLamp:f==="full_mar"?7:f==="full_perfect"?6:f==="full_great"?5:f==="full_good"?4:m?0:a===0?1:2,rank:m?"E":a>=99E4?"AAA":a>=95E4?"AA+":a>=9E5?"AA":a>=89E4?"AA-":a>=85E4?"A+":a>=8E5?"A":a>=79E4?"A-":a>=75E4?"B+":a>=7E5?"B":a>=69E4?"B-":a>=65E4?"C+":a>=6E5?"C":a>=59E4?"C-":a>=55E4?"D+":"D"})}})});const r=prompt("DDRadar ID:"); const n=prompt("Password for import");n&&Promise.all(Object.entries(h).map(([e,d])=>fetch(`${"https://api.ddradar.app/api/v1/scores"}/${e}/${r}`,{method:"post",body:JSON.stringify({password:n,scores:d}),headers:{"Content-Type":"application/json"}}).then(()=>b("div#container").prepend(`<div class="ddradar_added">Finished: ${d[0].songName}</div>`)).catch(c=>b("div#container").prepend(`<div class="ddradar_added" style="color:red;font-weight:bold;">Error!: ${d[0].songName} (${c})</div>`)))).then(()=>{alert("Import is complete.");b(".ddradar_added").remove()})}else alert("This is not DDR A20PLUS music detail page.")}else alert("This is not DDR A20PLUS music detail page.")}else alert("This is not DDR A20PLUS music detail page.")})($,location);